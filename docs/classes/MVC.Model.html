<html>
<head>
    <link rel="stylesheet" href="../style.css" type="text/css"/>
    <title>MVC.Model</title>
</head>
<body>
<div id='left_side'><h3>Documentation</h3>


    <a href='../classes/.html' id='.html'>

    </a>


    <a href='../classes/DeviceFilter.html' id='DeviceFilter.html'>
        DeviceFilter
    </a>


    <a href='../classes/MVC.Class.html' id='MVC.Class.html'>
        MVC.Class
    </a>


    <a href='../classes/MVC.Controller.html' id='MVC.Controller.html'>
        <span class='matches_previous'>MVC.</span>Controller
    </a>


    <a href='../classes/MVC.Controller.Action.html' id='MVC.Controller.Action.html'>
        <span class='matches_previous'>MVC.Controller.</span>Action
    </a>


    <a href='../classes/MVC.Controller.Action.Event.html' id='MVC.Controller.Action.Event.html'>
        <span class='matches_previous'>MVC.Controller.Action.</span>Event
    </a>


    <a href='../classes/MVC.Controller.Action.Subscribe.html' id='MVC.Controller.Action.Subscribe.html'>
        <span class='matches_previous'>MVC.Controller.Action.</span>Subscribe
    </a>


    <a href='../classes/MVC.Controller.Params.html' id='MVC.Controller.Params.html'>
        <span class='matches_previous'>MVC.Controller.</span>Params
    </a>


    <a href='../classes/MVC.Delegator.html' id='MVC.Delegator.html'>
        <span class='matches_previous'>MVC.</span>Delegator
    </a>


    <a href='../classes/MVC.Event.html' id='MVC.Event.html'>
        <span class='matches_previous'>MVC.</span>Event
    </a>


    <a href='../classes/MVC.Model.html' id='MVC.Model.html'>
        <span class='matches_previous'>MVC.</span>Model
    </a>


    <a href='../classes/MVC.Native.html' id='MVC.Native.html'>
        <span class='matches_previous'>MVC.</span>Native
    </a>


    <a href='../classes/MVC.Native.Array.html' id='MVC.Native.Array.html'>
        <span class='matches_previous'>MVC.Native.</span>Array
    </a>


    <a href='../classes/MVC.Native.Function.html' id='MVC.Native.Function.html'>
        <span class='matches_previous'>MVC.Native.</span>Function
    </a>


    <a href='../classes/MVC.Native.Number.html' id='MVC.Native.Number.html'>
        <span class='matches_previous'>MVC.Native.</span>Number
    </a>


    <a href='../classes/MVC.Native.Object.html' id='MVC.Native.Object.html'>
        <span class='matches_previous'>MVC.Native.</span>Object
    </a>


    <a href='../classes/MVC.Native.String.html' id='MVC.Native.String.html'>
        <span class='matches_previous'>MVC.Native.</span>String
    </a>


    <a href='../classes/MVC.Store.html' id='MVC.Store.html'>
        <span class='matches_previous'>MVC.</span>Store
    </a>


    <a href='../classes/MVC.View.html' id='MVC.View.html'>
        <span class='matches_previous'>MVC.</span>View
    </a>


    <a href='../classes/MVC.View.Helpers.html' id='MVC.View.Helpers.html'>
        <span class='matches_previous'>MVC.View.</span>Helpers
    </a>


    <a href='../classes/OpenAjax.html' id='OpenAjax.html'>
        OpenAjax
    </a>


    <a href='../classes/TangoAdminDevice.html' id='TangoAdminDevice.html'>
        TangoAdminDevice
    </a>


    <a href='../classes/TangoAttribute.html' id='TangoAttribute.html'>
        TangoAttribute
    </a>


    <a href='../classes/TangoCommand.html' id='TangoCommand.html'>
        TangoCommand
    </a>


    <a href='../classes/TangoDeviceProperty.html' id='TangoDeviceProperty.html'>
        TangoDeviceProperty
    </a>


    <a href='../classes/TangoPipe.html' id='TangoPipe.html'>
        TangoPipe
    </a>


    <a href='../classes/TangoWebapp.DataCollectionWrapper.html' id='TangoWebapp.DataCollectionWrapper.html'>
        TangoWebapp.DataCollectionWrapper
    </a>


    <a href='../classes/TangoWebapp.MainController.html' id='TangoWebapp.MainController.html'>
        <span class='matches_previous'>TangoWebapp.</span>MainController
    </a>


    <a href='../classes/TangoWebapp.platform.BottomToolbar.html' id='TangoWebapp.platform.BottomToolbar.html'>
        <span class='matches_previous'>TangoWebapp.</span>platform.BottomToolbar
    </a>


    <a href='../classes/TangoWebapp.platform.MainController.html' id='TangoWebapp.platform.MainController.html'>
        <span class='matches_previous'>TangoWebapp.platform.</span>MainController
    </a>


    <a href='../classes/TangoWebapp.platform.PlatformContext.html' id='TangoWebapp.platform.PlatformContext.html'>
        <span class='matches_previous'>TangoWebapp.platform.</span>PlatformContext
    </a>


    <a href='../classes/TangoWebapp.platform.TopToolbarController.html'
       id='TangoWebapp.platform.TopToolbarController.html'>
        <span class='matches_previous'>TangoWebapp.platform.</span>TopToolbarController
    </a>


    <a href='../classes/TangoWebapp.platform.UserContext.html' id='TangoWebapp.platform.UserContext.html'>
        <span class='matches_previous'>TangoWebapp.platform.</span>UserContext
    </a>


    <a href='../classes/TangoWebapp.TangoDatabase.html' id='TangoWebapp.TangoDatabase.html'>
        <span class='matches_previous'>TangoWebapp.</span>TangoDatabase
    </a>


    <a href='../classes/TangoWebapp.TangoDevice.html' id='TangoWebapp.TangoDevice.html'>
        <span class='matches_previous'>TangoWebapp.</span>TangoDevice
    </a>


    <a href='../classes/TangoWebapp.TangoHost.html' id='TangoWebapp.TangoHost.html'>
        <span class='matches_previous'>TangoWebapp.</span>TangoHost
    </a>


    <a href='../classes/TangoWebapp.TangoRestApi.html' id='TangoWebapp.TangoRestApi.html'>
        <span class='matches_previous'>TangoWebapp.</span>TangoRestApi
    </a>


    <a href='../classes/TangoWebapp.TangoRestApiRequest.html' id='TangoWebapp.TangoRestApiRequest.html'>
        <span class='matches_previous'>TangoWebapp.</span>TangoRestApiRequest
    </a>


    <a href='../classes/TangoWebappStorage.html' id='TangoWebappStorage.html'>
        TangoWebappStorage
    </a>


</div>
<div id='right_side'>
    <div><h1>MVC.Model <label>API</label></h1>

        <div id='shortcuts'><a href='#MVC.Model'>MVC.Model</a>, <a href='#MVC.Model.prototype'>prototype</a>, <a
                href='#MVC.Model.prototype._clear'>_clear</a>, <a
                href='#MVC.Model.prototype._setProperty'>_setProperty</a>, <a href='#MVC.Model.prototype.add_errors'>add_errors</a>,
            <a href='#MVC.Model.prototype.attributes'>attributes</a>, <a
                    href='#MVC.Model.prototype.callback'>callback</a>, <a
                    href='#MVC.Model.prototype.destroy'>destroy</a>, <a href='#MVC.Model.prototype.element'>element</a>,
            <a href='#MVC.Model.prototype.element_id'>element_id</a>, <a
                    href='#MVC.Model.prototype.elements'>elements</a>, <a href='#MVC.Model.prototype.init'>init</a>, <a
                    href='#MVC.Model.prototype.is_new_record'>is_new_record</a>, <a href='#MVC.Model.prototype.publish'>publish</a>,
            <a href='#MVC.Model.prototype.save'>save</a>, <a
                    href='#MVC.Model.prototype.set_attributes'>set_attributes</a>, <a
                    href='#MVC.Model.prototype.update_attributes'>update_attributes</a>, <a
                    href='#MVC.Model.prototype.valid'>valid</a>, <a href='#MVC.Model.prototype.validate'>validate</a>,
            <a href='#MVC.Model.static'>static</a>, <a href='#MVC.Model.static.add_attribute'>add_attribute</a>, <a
                    href='#MVC.Model.static.callback'>callback</a>, <a href='#MVC.Model.static.create'>create</a>, <a
                    href='#MVC.Model.static.create_as_existing'>create_as_existing</a>, <a
                    href='#MVC.Model.static.create_many_as_existing'>create_many_as_existing</a>, <a
                    href='#MVC.Model.static.destroy'>destroy</a>, <a href='#MVC.Model.static.element_id_to_id'>element_id_to_id</a>,
            <a href='#MVC.Model.static.find'>find</a>, <a href='#MVC.Model.static.find_all'>find_all</a>, <a
                    href='#MVC.Model.static.find_by_element'>find_by_element</a>, <a href='#MVC.Model.static.find_one'>find_one</a>,
            <a href='#MVC.Model.static.from_json'>from_json</a>, <a href='#MVC.Model.static.id'>id</a>, <a
                    href='#MVC.Model.static.init'>init</a>, <a href='#MVC.Model.static.namespace'>namespace</a>, <a
                    href='#MVC.Model.static.publish'>publish</a>, <a href='#MVC.Model.static.update'>update</a>, <a
                    href='#MVC.Model.static.validations'>validations</a></div>


        <div class='inherits'>Inherits: <b><a href='MVC.Class.html'>MVC.Class</a></b></div>


        <div class='group'>Models wrap an application's data layer. This is done in two ways:
            <ul>
                <li>Requesting data from and interacting with services</li>
                <li>Wrap service data with a domain-specific representation</li>
            </ul>
            A strong model layer keeps your code organized and maintainable, but it typically
            is the least developed part of the MVC architecture. This guide introduces you
            to the basics of how a model should work. Note that much of what it demonstrates could be
            done easier with a different base Model class such as [MVC.Model.Ajax|Model.Ajax].
            <h2>Services</h2>
            Your models should be the way you communicate with the server. Instead of using
            Ajax/XHR requests directly, perform those requests in a model.<br/><br/> For example:
            <pre><code class='javascript'> <pre>
 //instead of:
 new Ajax('/tasks.json', {onComplete: find_tasks_next_week })
 //do this:
 Task.find('all', find_tasks_next_week)<br/><br/> //instead of
 new Ajax('/tasks/'+id+'/complete.json',{onComplete: task_completed})
 //do this:
 task.complete(task_completed)
 </pre></code></pre>
            Typically there are two types of services any application connects to:
            <ul>
                <li>Group - operate on many instances. Ex: getting all tasks for a user.</li>
                <li>Singular - operate on one instance. Ex: completing a task.</li>
            </ul>
            For these types of services, you will want to build them in slightly different ways.
            <h3>Group Services</h3>
            Group services that request data should look like the following:
            <pre><code class='javascript'> <pre>
 Task = MVC.Model.extend('task',
 {
   find : function(params, callback){
     new Ajax('/tasks.json', {onComplete: MVC.Function.bind(function(response){
         //get data into the right format for create_as_existing
         var data =  eval('('+json_string+')');
         //call create_as_existing to create instances
         var instances = this.create_many_as_existing(data);
         //call back with data.
         callback(instances)
     }) })
   }
 },
 {})
 </pre></code></pre>
            Note this function uses <a href='MVC.Model.html#MVC.Model.static.create_many_as_existing'>create_many_as_existing</a>
            to create new instances. By using create_many_as_existing, the model will also publish
            <a href='OpenAjax.html'>OpenAjax.hub</a> messages that can be listed to by controllers.
            <h3>Singular Service</h3>
            Singular services that minipulate data might look like:
            <pre><code class='javascript'> <pre>
 Task = MVC.Model.extend('task',
 {},
 {
   complete: function(callback){
     new Ajax('/tasks/'+this.id+'/complete.json', {onComplete: MVC.Function.bind(function(response){
         this.completed = true;
         callback(this)
         this.publish("completed")
     }) })
   }
 })
 </pre></code></pre>
            <h2>Wrapping Data</h2>
            Now that you have instances, you can wrap their data in useful ways. This is done by adding
            functions to the Model's prototype methods. For example:
            <pre><code class='javascript'> <pre>
 Task = MVC.Model.extend('task',
 {},
 {
   status : function(){
     return this.complete ? "COMPLETE" : "INCOMPLETE"
   }
 })
 </pre></code></pre>
            <h3>P</h3>
            <ul>
                <li>Model.find_one(params, callbacks)</li>
                <li>Model.find_all(params, callbacks)</li>
                <li>Model.create(attributes, callbacks)</li>
                <li>Model.update(id, attributes, callbacks)</li>
                <li>Model.destroy(id, callbacks)</li>
            </ul>
            <br/><br/> There three are possible callbacks can be passed to the upper methods:
            <ul>
                <li> onSuccess -- called after onComplete if request was successful
                <li> onFailure -- called after onComplete if response has failed
                <li> onComplete -- called after a response arrives, typically defined by the model, user should use two
                    previous callbacks
            </ul>
            <br/><br/> onComplete is 'reserved' for specialized models, like JsonP where status of the response is
            determined in this callback
            user though may overwrite this behavior by passing single onComplete callback<br/><br/>
            <h2>Using Stores</h2>
            Model keeps all instances of a class in a <a href='MVC.Store.html'>Store</a>. Stores provide an easy way of
            looking up instances by id.<br/><br/>
            <h2>Using OpenAjax</h2><br/><br/></div>

        <div><h2>Static Methods</h2>
            <div>
                <div class='attribute' id="MVC.Model.static.add_attribute"><h3>add_attribute</h3>
                    <p>Adds an attribute to the list of attributes for this class.
                        @param {String} property
                        @param {String} type

                    </p></div>
                <div class='attribute' id="MVC.Model.static.callback"><h3>callback</h3>
                    <p>Creates a callback function that will call back the function on the static class.
                        If other arguments are passed, they will be added before the parameters used to call the
                        callback.
                        @param {String} fname
                        @return {Function} a callback function useful for Ajax calls

                    </p></div>
                <div class='attribute' id="MVC.Model.static.create"><h3>create</h3>
                    <p>Creates an instance of this model asynchronously

                        @param {Object} attributes -- new instance's attributes
                        @param {Object} cbks -- callbacks. At least onSuccess must be provided

                    </p></div>
                <div class='attribute' id="MVC.Model.static.create_as_existing"><h3>create_as_existing</h3>
                    <p>Used to create an existing object from attributes

                        Publishes 'create.as_existing' event

                        @param {Object} attributes
                        @return {Model} an instance of this model

                    </p></div>
                <div class='attribute' id="MVC.Model.static.create_many_as_existing"><h3>create_many_as_existing</h3>
                    <p>Creates instances of this model from an array of attributes

                        @param {Array} instances
                        @return {Array} an array of instances of this model

                    </p></div>
                <div class='method'>


                    <h3 id="MVC.Model.static.destroy">destroy</h3>
                    <pre class='signiture'><code>destroy(id, cbks) -> undefined</code></pre>
                    <div class='real_comment'>
                    </div>

                    <div class='param '>
                        <label>id</label>
                        <code>{}</code> -
                    </div>

                    <div class='param '>
                        <label>cbks</label>
                        <code>{}</code> -
                    </div>


                </div>
                <div class='attribute' id="MVC.Model.static.element_id_to_id"><h3>element_id_to_id</h3>
                    <p>Takes an element ID like 'todo_5' and returns '5'
                        @param {Object} element_id
                        @return {String}

                    </p></div>
                <div class='method'>


                    <h3 id="MVC.Model.static.find">find</h3>
                    <pre class='signiture'><code>find(f) -> Array</code></pre>
                    <div class='real_comment'>Lookups for data in the local storage

                    </div>

                    <div class='param '>
                        <label>f</label>
                        <code>{Function|string}</code> - -- filter function or 'all'
                    </div>


                    <div class='return'>
                        <label>returns</label>
                        <code>{Array}</code> -

                    </div>

                </div>
                <div class='attribute' id="MVC.Model.static.find_all"><h3>find_all</h3>
                    <p>Finds all instances that satisfies filter function or all, if no filter function is provided

                        @param {Function} f a filter function
                        @return {Array}

                    </p></div>
                <div class='attribute' id="MVC.Model.static.find_by_element"><h3>find_by_element</h3>
                    <p>Returns an instance if one can be found in the store.
                        @param {Object} el

                    </p></div>
                <div class='attribute' id="MVC.Model.static.find_one"><h3>find_one</h3>
                    <p>Finds objects in this class

                        Inherited models may redefine this method to perform a request

                        @param {Object} id the id of a object
                        @param {Object} params params passed to the
                        @param {Object} cbks callbacks object
                        @return {Model} will return instances of the model if synchronous

                    </p></div>
                <div class='attribute' id="MVC.Model.static.from_json"><h3>from_json</h3>
                    <p>Creates an instance of this model from a json string

                        @param {String} json

                    </p></div>
                <div class='attribute' id="MVC.Model.static.id"><h3>id</h3>
                    <p>The name of the id field. Defaults to 'id'

                    </p></div>
                <div class='attribute' id="MVC.Model.static.init"><h3>init</h3>
                    <p>Creates this model Class instance

                        @constructor

                    </p></div>
                <div class='attribute' id="MVC.Model.static.namespace"><h3>namespace</h3>
                    <p>Namespaces are used to publish messages to a specific namespace.
                        @code_start
                    <pre>
 Org.Task = MVC.Model.extend('task',{
   namespace: "org"
 },
 {
   update: function(){
     this.publish("update") // publishes 'this' to 'org.task.update'
   }
 })
 </pre>
                    @code_end

                    </p></div>
                <div class='attribute' id="MVC.Model.static.publish"><h3>publish</h3>
                    <p>Publishes to open ajax hub. Always adds the className.event
                        @param {Object} event
                        @param {Object} data

                    </p></div>
                <div class='attribute' id="MVC.Model.static.update"><h3>update</h3>
                    <p>This method does not actually updates values and should not be called directly
                        use update_attributes instance method to really update

                        @param id
                        @param attributes
                        @param {Object} cbks -- callbacks. At least onSuccess must be provided

                    </p></div>
                <div class='attribute' id="MVC.Model.static.validations"><h3>validations</h3>
                    <p>An object attr->function which will be applied to the instance of this model when validate method
                        is invoked

                        Each function returns an object: attr->error (simply text) or nothing


                    </p></div>
            </div>
            <h2>Prototype Methods</h2>
            <div>
                <div class='attribute' id="MVC.Model.prototype._clear"><h3>_clear</h3>
                    <p>for (var attr in attributes){
                        if(attributes.hasOwnProperty(attr)){
                        this._setAttribute(attr, attributes[attr]);
                        }
                        }
                    </p></div>
                <div class='attribute' id="MVC.Model.prototype._setProperty"><h3>_setProperty</h3>
                    <p>Checks if there is a set_<i>property</i> value. If it returns true, lets it handle; otherwise
                        saves it.
                        @param {Object} property
                        @param {Object} value

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.add_errors"><h3>add_errors</h3>
                    <p>Add errors to this instance

                        @param {Array} errors

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.attributes"><h3>attributes</h3>
                    <p>Returns this model's attributes

                        Associated models include their attributes as nested objects into the result

                        @return {Object}

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.callback"><h3>callback</h3>
                    <p>Creates a callback function that will call back the function on the instance.
                        If other arguments are passed, they will be added before the parameters used to call the
                        callback.
                        @param {String} fname
                        @return {Function} a callback function useful for Ajax calls

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.destroy"><h3>destroy</h3>
                    <p>Destroys this instance

                        @param {Function} callback or object of callbacks

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.element"><h3>element</h3>
                    <p>Returns an html element found by using element_id for this instance

                        @returns {*}

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.element_id"><h3>element_id</h3>
                    <p>Returns the suggested element id for this instance

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.elements"><h3>elements</h3>
                    <p>Returns html elements with this element_id class

                        @returns {*}

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.init"><h3>init</h3>
                    <p>Creates, but does not save a new instance of this class
                        @param {Object} attributes -> a hash of attributes

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.is_new_record"><h3>is_new_record</h3>
                    <p>Returns if the instance is a new object

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.publish"><h3>publish</h3>
                    <p>Publishes to open ajax hub
                        @param {String} event
                        @param {optional:Object} data if missing, uses the instance in {data: this}

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.save"><h3>save</h3>
                    <p>Saves the instance
                        @param {Function} callbacks onComplete function or object of callbacks

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.set_attributes"><h3>set_attributes</h3>
                    <p>Sets a hash of attributes for this instance
                        @param {Object} attributes

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.update_attributes"><h3>update_attributes</h3>
                    <p>Sets the attributes on this instance and calls save.
                        @param {Object} attributes
                        @param {Object} callback

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.valid"><h3>valid</h3>
                    <p>Determines if this instance has no errors

                        @returns {boolean}

                    </p></div>
                <div class='attribute' id="MVC.Model.prototype.validate"><h3>validate</h3>
                    <p>Validates this instance

                    </p></div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="../highlight/highlight.js"></script>
<script type="text/javascript">
    hljs.initHighlightingOnLoad('html', 'css', 'javascript');
</script>
<script type="text/javascript">
    //select someone
    parts = window.location.href.split("/")
    var selected = document.getElementById(parts.pop().replace(/[#|?].*/, ""))
    if (selected) {
        selected.className = "selected";
    }
</script>
</body>
</html>